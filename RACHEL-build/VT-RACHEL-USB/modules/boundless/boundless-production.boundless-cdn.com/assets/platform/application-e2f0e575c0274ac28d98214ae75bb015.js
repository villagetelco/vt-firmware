"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(n){return 10>n?"0"+n:n}function quote(string){return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,partial,mind=gap,value=holder[key];switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),"function"==typeof rep&&(value=rep.call(holder,key,value)),typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;length>i;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep)for(length=rep.length,i=0;length>i;i+=1)"string"==typeof rep[i]&&(k=rep[i],v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(value,replacer,space){var i;if(gap="",indent="","number"==typeof space)for(i=0;space>i;i+=1)indent+=" ";else"string"==typeof space&&(indent=space);if(rep=replacer,replacer&&"function"!=typeof replacer&&("object"!=typeof replacer||"number"!=typeof replacer.length))throw new Error("JSON.stringify");return str("",{"":value})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),/**
 * History.js Native Adapter
 * @author Benjamin Arthur Lupton <contact@balupton.com>
 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
function(window,undefined){"use strict";var History=window.History=window.History||{};if("undefined"!=typeof History.Adapter)throw new Error("History.js Adapter has already been loaded...");History.Adapter={handlers:{},_uid:1,uid:function(element){return element._uid||(element._uid=History.Adapter._uid++)},bind:function(element,eventName,callback){var uid=History.Adapter.uid(element);History.Adapter.handlers[uid]=History.Adapter.handlers[uid]||{},History.Adapter.handlers[uid][eventName]=History.Adapter.handlers[uid][eventName]||[],History.Adapter.handlers[uid][eventName].push(callback),element["on"+eventName]=function(element,eventName){return function(event){History.Adapter.trigger(element,eventName,event)}}(element,eventName)},trigger:function(element,eventName,event){event=event||{};var i,n,uid=History.Adapter.uid(element);for(History.Adapter.handlers[uid]=History.Adapter.handlers[uid]||{},History.Adapter.handlers[uid][eventName]=History.Adapter.handlers[uid][eventName]||[],i=0,n=History.Adapter.handlers[uid][eventName].length;n>i;++i)History.Adapter.handlers[uid][eventName][i].apply(this,[event])},extractEventData:function(key,event){var result=event&&event[key]||undefined;return result},onDomLoad:function(callback){var timeout=window.setTimeout(function(){callback()},2e3);window.onload=function(){clearTimeout(timeout),callback()}}},"undefined"!=typeof History.init&&History.init()}(window),/**
 * History.js HTML4 Support
 * Depends on the HTML5 Support
 * @author Benjamin Arthur Lupton <contact@balupton.com>
 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
function(window,undefined){"use strict";var document=window.document,setTimeout=window.setTimeout||setTimeout,clearTimeout=window.clearTimeout||clearTimeout,setInterval=window.setInterval||setInterval,History=window.History=window.History||{};if("undefined"!=typeof History.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");History.initHtml4=function(){return"undefined"!=typeof History.initHtml4.initialized?!1:(History.initHtml4.initialized=!0,History.enabled=!0,History.savedHashes=[],History.isLastHash=function(newHash){var isLast,oldHash=History.getHashByIndex();return isLast=newHash===oldHash},History.isHashEqual=function(newHash,oldHash){return newHash=encodeURIComponent(newHash).replace(/%25/g,"%"),oldHash=encodeURIComponent(oldHash).replace(/%25/g,"%"),newHash===oldHash},History.saveHash=function(newHash){return History.isLastHash(newHash)?!1:(History.savedHashes.push(newHash),!0)},History.getHashByIndex=function(index){var hash=null;return hash="undefined"==typeof index?History.savedHashes[History.savedHashes.length-1]:0>index?History.savedHashes[History.savedHashes.length+index]:History.savedHashes[index]},History.discardedHashes={},History.discardedStates={},History.discardState=function(discardedState,forwardState,backState){var discardObject,discardedStateHash=History.getHashByState(discardedState);return discardObject={discardedState:discardedState,backState:backState,forwardState:forwardState},History.discardedStates[discardedStateHash]=discardObject,!0},History.discardHash=function(discardedHash,forwardState,backState){var discardObject={discardedHash:discardedHash,backState:backState,forwardState:forwardState};return History.discardedHashes[discardedHash]=discardObject,!0},History.discardedState=function(State){var discarded,StateHash=History.getHashByState(State);return discarded=History.discardedStates[StateHash]||!1},History.discardedHash=function(hash){var discarded=History.discardedHashes[hash]||!1;return discarded},History.recycleState=function(State){var StateHash=History.getHashByState(State);return History.discardedState(State)&&delete History.discardedStates[StateHash],!0},History.emulated.hashChange&&(History.hashChangeInit=function(){History.checkerFunction=null;var iframeId,iframe,lastIframeHash,checkerRunning,lastDocumentHash="",startedWithHash=Boolean(History.getHash());return History.isInternetExplorer()?(iframeId="historyjs-iframe",iframe=document.createElement("iframe"),iframe.setAttribute("id",iframeId),iframe.setAttribute("src","#"),iframe.style.display="none",document.body.appendChild(iframe),iframe.contentWindow.document.open(),iframe.contentWindow.document.close(),lastIframeHash="",checkerRunning=!1,History.checkerFunction=function(){if(checkerRunning)return!1;checkerRunning=!0;var documentHash=History.getHash(),iframeHash=History.getHash(iframe.contentWindow.document);return documentHash!==lastDocumentHash?(lastDocumentHash=documentHash,iframeHash!==documentHash&&(lastIframeHash=iframeHash=documentHash,iframe.contentWindow.document.open(),iframe.contentWindow.document.close(),iframe.contentWindow.document.location.hash=History.escapeHash(documentHash)),History.Adapter.trigger(window,"hashchange")):iframeHash!==lastIframeHash&&(lastIframeHash=iframeHash,startedWithHash&&""===iframeHash?History.back():History.setHash(iframeHash,!1)),checkerRunning=!1,!0}):History.checkerFunction=function(){var documentHash=History.getHash()||"";return documentHash!==lastDocumentHash&&(lastDocumentHash=documentHash,History.Adapter.trigger(window,"hashchange")),!0},History.intervalList.push(setInterval(History.checkerFunction,History.options.hashChangeInterval)),!0},History.Adapter.onDomLoad(History.hashChangeInit)),History.emulated.pushState&&(History.onHashChange=function(event){var discardObject,currentUrl=event&&event.newURL||History.getLocationHref(),currentHash=History.getHashByUrl(currentUrl),currentState=null,currentStateHash=null;return History.isLastHash(currentHash)?(History.busy(!1),!1):(History.doubleCheckComplete(),History.saveHash(currentHash),currentHash&&History.isTraditionalAnchor(currentHash)?(History.Adapter.trigger(window,"anchorchange"),History.busy(!1),!1):(currentState=History.extractState(History.getFullUrl(currentHash||History.getLocationHref()),!0),History.isLastSavedState(currentState)?(History.busy(!1),!1):(currentStateHash=History.getHashByState(currentState),(discardObject=History.discardedState(currentState))?(History.getHashByIndex(-2)===History.getHashByState(discardObject.forwardState)?History.back(!1):History.forward(!1),!1):(History.pushState(currentState.data,currentState.title,encodeURI(currentState.url),!1),!0))))},History.Adapter.bind(window,"hashchange",History.onHashChange),History.pushState=function(data,title,url,queue){if(url=encodeURI(url).replace(/%25/g,"%"),History.getHashByUrl(url))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(queue!==!1&&History.busy())return History.pushQueue({scope:History,callback:History.pushState,args:arguments,queue:queue}),!1;History.busy(!0);var newState=History.createStateObject(data,title,url),newStateHash=History.getHashByState(newState),oldState=History.getState(!1),oldStateHash=History.getHashByState(oldState),html4Hash=History.getHash(),wasExpected=History.expectedStateId==newState.id;return History.storeState(newState),History.expectedStateId=newState.id,History.recycleState(newState),History.setTitle(newState),newStateHash===oldStateHash?(History.busy(!1),!1):(History.saveState(newState),wasExpected||History.Adapter.trigger(window,"statechange"),History.isHashEqual(newStateHash,html4Hash)||History.isHashEqual(newStateHash,History.getShortUrl(History.getLocationHref()))||History.setHash(newStateHash,!1),History.busy(!1),!0)},History.replaceState=function(data,title,url,queue){if(url=encodeURI(url).replace(/%25/g,"%"),History.getHashByUrl(url))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(queue!==!1&&History.busy())return History.pushQueue({scope:History,callback:History.replaceState,args:arguments,queue:queue}),!1;History.busy(!0);var newState=History.createStateObject(data,title,url),newStateHash=History.getHashByState(newState),oldState=History.getState(!1),oldStateHash=History.getHashByState(oldState),previousState=History.getStateByIndex(-2);return History.discardState(oldState,newState,previousState),newStateHash===oldStateHash?(History.storeState(newState),History.expectedStateId=newState.id,History.recycleState(newState),History.setTitle(newState),History.saveState(newState),History.Adapter.trigger(window,"statechange"),History.busy(!1)):History.pushState(newState.data,newState.title,newState.url,!1),!0}),void(History.emulated.pushState&&History.getHash()&&!History.emulated.hashChange&&History.Adapter.onDomLoad(function(){History.Adapter.trigger(window,"hashchange")})))},"undefined"!=typeof History.init&&History.init()}(window),/**
 * History.js Core
 * @author Benjamin Arthur Lupton <contact@balupton.com>
 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
function(window,undefined){"use strict";var console=window.console||undefined,document=window.document,navigator=window.navigator,sessionStorage=window.sessionStorage||!1,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,setInterval=window.setInterval,clearInterval=window.clearInterval,JSON=window.JSON,alert=window.alert,History=window.History=window.History||{},history=window.history;try{sessionStorage.setItem("TEST","1"),sessionStorage.removeItem("TEST")}catch(e){sessionStorage=!1}if(JSON.stringify=JSON.stringify||JSON.encode,JSON.parse=JSON.parse||JSON.decode,"undefined"!=typeof History.init)throw new Error("History.js Core has already been loaded...");History.init=function(options){return"undefined"==typeof History.Adapter?!1:("undefined"!=typeof History.initCore&&History.initCore(),"undefined"!=typeof History.initHtml4&&History.initHtml4(),!0)},History.initCore=function(options){if("undefined"!=typeof History.initCore.initialized)return!1;if(History.initCore.initialized=!0,History.options=History.options||{},History.options.hashChangeInterval=History.options.hashChangeInterval||100,History.options.safariPollInterval=History.options.safariPollInterval||500,History.options.doubleCheckInterval=History.options.doubleCheckInterval||500,History.options.disableSuid=History.options.disableSuid||!1,History.options.storeInterval=History.options.storeInterval||1e3,History.options.busyDelay=History.options.busyDelay||250,History.options.debug=History.options.debug||!1,History.options.initialTitle=History.options.initialTitle||document.title,History.options.html4Mode=History.options.html4Mode||!1,History.options.delayInit=History.options.delayInit||!1,History.intervalList=[],History.clearAllIntervals=function(){var i,il=History.intervalList;if("undefined"!=typeof il&&null!==il){for(i=0;i<il.length;i++)clearInterval(il[i]);History.intervalList=null}},History.debug=function(){History.options.debug&&History.log.apply(History,arguments)},History.log=function(){var message,i,n,args,arg,consoleExists=!("undefined"==typeof console||"undefined"==typeof console.log||"undefined"==typeof console.log.apply),textarea=document.getElementById("log");for(consoleExists?(args=Array.prototype.slice.call(arguments),message=args.shift(),"undefined"!=typeof console.debug?console.debug.apply(console,[message,args]):console.log.apply(console,[message,args])):message="\n"+arguments[0]+"\n",i=1,n=arguments.length;n>i;++i){if(arg=arguments[i],"object"==typeof arg&&"undefined"!=typeof JSON)try{arg=JSON.stringify(arg)}catch(Exception){}message+="\n"+arg+"\n"}return textarea?(textarea.value+=message+"\n-----\n",textarea.scrollTop=textarea.scrollHeight-textarea.clientHeight):consoleExists||alert(message),!0},History.getInternetExplorerMajorVersion=function(){var result=History.getInternetExplorerMajorVersion.cached="undefined"!=typeof History.getInternetExplorerMajorVersion.cached?History.getInternetExplorerMajorVersion.cached:function(){for(var v=3,div=document.createElement("div"),all=div.getElementsByTagName("i");(div.innerHTML="<!--[if gt IE "+ ++v+"]><i></i><![endif]-->")&&all[0];);return v>4?v:!1}();return result},History.isInternetExplorer=function(){var result=History.isInternetExplorer.cached="undefined"!=typeof History.isInternetExplorer.cached?History.isInternetExplorer.cached:Boolean(History.getInternetExplorerMajorVersion());return result},History.options.html4Mode?History.emulated={pushState:!0,hashChange:!0}:History.emulated={pushState:!Boolean(window.history&&window.history.pushState&&window.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(navigator.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(navigator.userAgent))),hashChange:Boolean(!("onhashchange"in window||"onhashchange"in document)||History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<8)},History.enabled=!History.emulated.pushState,History.bugs={setHash:Boolean(!History.emulated.pushState&&"Apple Computer, Inc."===navigator.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),safariPoll:Boolean(!History.emulated.pushState&&"Apple Computer, Inc."===navigator.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),ieDoubleCheck:Boolean(History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<7)},History.isEmptyObject=function(obj){for(var name in obj)if(obj.hasOwnProperty(name))return!1;return!0},History.cloneObject=function(obj){var hash,newObj;return obj?(hash=JSON.stringify(obj),newObj=JSON.parse(hash)):newObj={},newObj},History.getRootUrl=function(){var rootUrl=document.location.protocol+"//"+(document.location.hostname||document.location.host);return document.location.port&&(rootUrl+=":"+document.location.port),rootUrl+="/"},History.getBaseHref=function(){var baseElements=document.getElementsByTagName("base"),baseElement=null,baseHref="";return 1===baseElements.length&&(baseElement=baseElements[0],baseHref=baseElement.href.replace(/[^\/]+$/,"")),baseHref=baseHref.replace(/\/+$/,""),baseHref&&(baseHref+="/"),baseHref},History.getBaseUrl=function(){var baseUrl=History.getBaseHref()||History.getBasePageUrl()||History.getRootUrl();return baseUrl},History.getPageUrl=function(){var pageUrl,State=History.getState(!1,!1),stateUrl=(State||{}).url||History.getLocationHref();return pageUrl=stateUrl.replace(/\/+$/,"").replace(/[^\/]+$/,function(part,index,string){return/\./.test(part)?part:part+"/"})},History.getBasePageUrl=function(){var basePageUrl=History.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(part,index,string){return/[^\/]$/.test(part)?"":part}).replace(/\/+$/,"")+"/";return basePageUrl},History.getFullUrl=function(url,allowBaseHref){var fullUrl=url,firstChar=url.substring(0,1);return allowBaseHref="undefined"==typeof allowBaseHref?!0:allowBaseHref,/[a-z]+\:\/\//.test(url)||(fullUrl="/"===firstChar?History.getRootUrl()+url.replace(/^\/+/,""):"#"===firstChar?History.getPageUrl().replace(/#.*/,"")+url:"?"===firstChar?History.getPageUrl().replace(/[\?#].*/,"")+url:allowBaseHref?History.getBaseUrl()+url.replace(/^(\.\/)+/,""):History.getBasePageUrl()+url.replace(/^(\.\/)+/,"")),fullUrl.replace(/\#$/,"")},History.getShortUrl=function(url){var shortUrl=url,baseUrl=History.getBaseUrl(),rootUrl=History.getRootUrl();return History.emulated.pushState&&(shortUrl=shortUrl.replace(baseUrl,"")),shortUrl=shortUrl.replace(rootUrl,"/"),shortUrl="./"+shortUrl,shortUrl=shortUrl.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},History.getLocationHref=function(doc){return doc=doc||document,doc.URL===doc.location.href?doc.location.href:doc.location.href===decodeURIComponent(doc.URL)?doc.URL:doc.location.hash&&decodeURIComponent(doc.location.href.replace(/^[^#]+/,""))===doc.location.hash?doc.location.href:-1==doc.URL.indexOf("#")&&-1!=doc.location.href.indexOf("#")?doc.location.href:doc.URL||doc.location.href},History.store={},History.idToState=History.idToState||{},History.stateToId=History.stateToId||{},History.urlToId=History.urlToId||{},History.storedStates=History.storedStates||[],History.savedStates=History.savedStates||[],History.normalizeStore=function(){History.store.idToState=History.store.idToState||{},History.store.urlToId=History.store.urlToId||{},History.store.stateToId=History.store.stateToId||{}},History.getState=function(friendly,create){"undefined"==typeof friendly&&(friendly=!0),"undefined"==typeof create&&(create=!0);var State=History.getLastSavedState();return!State&&create&&(State=History.createStateObject()),friendly&&(State=History.cloneObject(State),State.url=State.cleanUrl||State.url),State},History.getIdByState=function(newState){var str,id=History.extractId(newState.url);if(!id)if(str=History.getStateString(newState),"undefined"!=typeof History.stateToId[str])id=History.stateToId[str];else if("undefined"!=typeof History.store.stateToId[str])id=History.store.stateToId[str];else{for(;;)if(id=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof History.idToState[id]&&"undefined"==typeof History.store.idToState[id])break;History.stateToId[str]=id,History.idToState[id]=newState}return id},History.normalizeState=function(oldState){var newState,dataNotEmpty;return oldState&&"object"==typeof oldState||(oldState={}),"undefined"!=typeof oldState.normalized?oldState:(oldState.data&&"object"==typeof oldState.data||(oldState.data={}),newState={},newState.normalized=!0,newState.title=oldState.title||"",newState.url=History.getFullUrl(oldState.url?oldState.url:History.getLocationHref()),newState.hash=History.getShortUrl(newState.url),newState.data=History.cloneObject(oldState.data),newState.id=History.getIdByState(newState),newState.cleanUrl=newState.url.replace(/\??\&_suid.*/,""),newState.url=newState.cleanUrl,dataNotEmpty=!History.isEmptyObject(newState.data),(newState.title||dataNotEmpty)&&History.options.disableSuid!==!0&&(newState.hash=History.getShortUrl(newState.url).replace(/\??\&_suid.*/,""),/\?/.test(newState.hash)||(newState.hash+="?"),newState.hash+="&_suid="+newState.id),newState.hashedUrl=History.getFullUrl(newState.hash),(History.emulated.pushState||History.bugs.safariPoll)&&History.hasUrlDuplicate(newState)&&(newState.url=newState.hashedUrl),newState)},History.createStateObject=function(data,title,url){var State={data:data,title:title,url:url};return State=History.normalizeState(State)},History.getStateById=function(id){id=String(id);var State=History.idToState[id]||History.store.idToState[id]||undefined;return State},History.getStateString=function(passedState){var State,cleanedState,str;return State=History.normalizeState(passedState),cleanedState={data:State.data,title:passedState.title,url:passedState.url},str=JSON.stringify(cleanedState)},History.getStateId=function(passedState){var State,id;return State=History.normalizeState(passedState),id=State.id},History.getHashByState=function(passedState){var State,hash;return State=History.normalizeState(passedState),hash=State.hash},History.extractId=function(url_or_hash){var id,parts,url,tmp;return tmp=-1!=url_or_hash.indexOf("#")?url_or_hash.split("#")[0]:url_or_hash,parts=/(.*)\&_suid=([0-9]+)$/.exec(tmp),url=parts?parts[1]||url_or_hash:url_or_hash,id=parts?String(parts[2]||""):"",id||!1},History.isTraditionalAnchor=function(url_or_hash){var isTraditional=!/[\/\\.]/.test(url_or_hash);return isTraditional},History.extractState=function(url_or_hash,create){var id,url,State=null;return create=create||!1,id=History.extractId(url_or_hash),id&&(State=History.getStateById(id)),State||(url=History.getFullUrl(url_or_hash),id=History.getIdByUrl(url)||!1,id&&(State=History.getStateById(id)),State||!create||History.isTraditionalAnchor(url_or_hash)||(State=History.createStateObject(null,null,url))),State},History.getIdByUrl=function(url){var id=History.urlToId[url]||History.store.urlToId[url]||undefined;return id},History.getLastSavedState=function(){return History.savedStates[History.savedStates.length-1]||undefined},History.getLastStoredState=function(){return History.storedStates[History.storedStates.length-1]||undefined},History.hasUrlDuplicate=function(newState){var oldState,hasDuplicate=!1;return oldState=History.extractState(newState.url),hasDuplicate=oldState&&oldState.id!==newState.id},History.storeState=function(newState){return History.urlToId[newState.url]=newState.id,History.storedStates.push(History.cloneObject(newState)),newState},History.isLastSavedState=function(newState){var newId,oldState,oldId,isLast=!1;return History.savedStates.length&&(newId=newState.id,oldState=History.getLastSavedState(),oldId=oldState.id,isLast=newId===oldId),isLast},History.saveState=function(newState){return History.isLastSavedState(newState)?!1:(History.savedStates.push(History.cloneObject(newState)),!0)},History.getStateByIndex=function(index){var State=null;return State="undefined"==typeof index?History.savedStates[History.savedStates.length-1]:0>index?History.savedStates[History.savedStates.length+index]:History.savedStates[index]},History.getCurrentIndex=function(){var index=null;return index=History.savedStates.length<1?0:History.savedStates.length-1},History.getHash=function(doc){var hash,url=History.getLocationHref(doc);return hash=History.getHashByUrl(url)},History.unescapeHash=function(hash){var result=History.normalizeHash(hash);return result=decodeURIComponent(result)},History.normalizeHash=function(hash){var result=hash.replace(/[^#]*#/,"").replace(/#.*/,"");return result},History.setHash=function(hash,queue){var State,pageUrl;return queue!==!1&&History.busy()?(History.pushQueue({scope:History,callback:History.setHash,args:arguments,queue:queue}),!1):(History.busy(!0),State=History.extractState(hash,!0),State&&!History.emulated.pushState?History.pushState(State.data,State.title,State.url,!1):History.getHash()!==hash&&(History.bugs.setHash?(pageUrl=History.getPageUrl(),History.pushState(null,null,pageUrl+"#"+hash,!1)):document.location.hash=hash),History)},History.escapeHash=function(hash){var result=History.normalizeHash(hash);return result=window.encodeURIComponent(result),History.bugs.hashEscape||(result=result.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),result},History.getHashByUrl=function(url){var hash=String(url).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return hash=History.unescapeHash(hash)},History.setTitle=function(newState){var firstState,title=newState.title;title||(firstState=History.getStateByIndex(0),firstState&&firstState.url===newState.url&&(title=firstState.title||History.options.initialTitle));try{document.getElementsByTagName("title")[0].innerHTML=title.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(Exception){}return document.title=title,History},History.queues=[],History.busy=function(value){if("undefined"!=typeof value?History.busy.flag=value:"undefined"==typeof History.busy.flag&&(History.busy.flag=!1),!History.busy.flag){clearTimeout(History.busy.timeout);var fireNext=function(){var i,queue,item;if(!History.busy.flag)for(i=History.queues.length-1;i>=0;--i)queue=History.queues[i],0!==queue.length&&(item=queue.shift(),History.fireQueueItem(item),History.busy.timeout=setTimeout(fireNext,History.options.busyDelay))};History.busy.timeout=setTimeout(fireNext,History.options.busyDelay)}return History.busy.flag},History.busy.flag=!1,History.fireQueueItem=function(item){return item.callback.apply(item.scope||History,item.args||[])},History.pushQueue=function(item){return History.queues[item.queue||0]=History.queues[item.queue||0]||[],History.queues[item.queue||0].push(item),History},History.queue=function(item,queue){return"function"==typeof item&&(item={callback:item}),"undefined"!=typeof queue&&(item.queue=queue),History.busy()?History.pushQueue(item):History.fireQueueItem(item),History},History.clearQueue=function(){return History.busy.flag=!1,History.queues=[],History},History.stateChanged=!1,History.doubleChecker=!1,History.doubleCheckComplete=function(){return History.stateChanged=!0,History.doubleCheckClear(),History},History.doubleCheckClear=function(){return History.doubleChecker&&(clearTimeout(History.doubleChecker),History.doubleChecker=!1),History},History.doubleCheck=function(tryAgain){return History.stateChanged=!1,History.doubleCheckClear(),History.bugs.ieDoubleCheck&&(History.doubleChecker=setTimeout(function(){return History.doubleCheckClear(),History.stateChanged||tryAgain(),!0},History.options.doubleCheckInterval)),History},History.safariStatePoll=function(){var newState,urlState=History.extractState(History.getLocationHref());if(!History.isLastSavedState(urlState))return newState=urlState,newState||(newState=History.createStateObject()),History.Adapter.trigger(window,"popstate"),History},History.back=function(queue){return queue!==!1&&History.busy()?(History.pushQueue({scope:History,callback:History.back,args:arguments,queue:queue}),!1):(History.busy(!0),History.doubleCheck(function(){History.back(!1)}),history.go(-1),!0)},History.forward=function(queue){return queue!==!1&&History.busy()?(History.pushQueue({scope:History,callback:History.forward,args:arguments,queue:queue}),!1):(History.busy(!0),History.doubleCheck(function(){History.forward(!1)}),history.go(1),!0)},History.go=function(index,queue){var i;if(index>0)for(i=1;index>=i;++i)History.forward(queue);else{if(!(0>index))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(i=-1;i>=index;--i)History.back(queue)}return History},History.emulated.pushState){var emptyFunction=function(){};History.pushState=History.pushState||emptyFunction,History.replaceState=History.replaceState||emptyFunction}else History.onPopState=function(event,extra){var currentHash,currentState,stateId=!1,newState=!1;return History.doubleCheckComplete(),(currentHash=History.getHash())?(currentState=History.extractState(currentHash||History.getLocationHref(),!0),currentState?History.replaceState(currentState.data,currentState.title,currentState.url,!1):(History.Adapter.trigger(window,"anchorchange"),History.busy(!1)),History.expectedStateId=!1,!1):(stateId=History.Adapter.extractEventData("state",event,extra)||!1,newState=stateId?History.getStateById(stateId):History.expectedStateId?History.getStateById(History.expectedStateId):History.extractState(History.getLocationHref()),newState||(newState=History.createStateObject(null,null,History.getLocationHref())),History.expectedStateId=!1,History.isLastSavedState(newState)?(History.busy(!1),!1):(History.storeState(newState),History.saveState(newState),History.setTitle(newState),History.Adapter.trigger(window,"statechange"),History.busy(!1),!0))},History.Adapter.bind(window,"popstate",History.onPopState),History.pushState=function(data,title,url,queue){if(History.getHashByUrl(url)&&History.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(queue!==!1&&History.busy())return History.pushQueue({scope:History,callback:History.pushState,args:arguments,queue:queue}),!1;History.busy(!0);var newState=History.createStateObject(data,title,url);return History.isLastSavedState(newState)?History.busy(!1):(History.storeState(newState),History.expectedStateId=newState.id,history.pushState(newState.id,newState.title,newState.url),History.Adapter.trigger(window,"popstate")),!0},History.replaceState=function(data,title,url,queue){if(History.getHashByUrl(url)&&History.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(queue!==!1&&History.busy())return History.pushQueue({scope:History,callback:History.replaceState,args:arguments,queue:queue}),!1;History.busy(!0);var newState=History.createStateObject(data,title,url);return History.isLastSavedState(newState)?History.busy(!1):(History.storeState(newState),History.expectedStateId=newState.id,history.replaceState(newState.id,newState.title,newState.url),History.Adapter.trigger(window,"popstate")),!0};if(sessionStorage){try{History.store=JSON.parse(sessionStorage.getItem("History.store"))||{}}catch(err){History.store={}}History.normalizeStore()}else History.store={},History.normalizeStore();History.Adapter.bind(window,"unload",History.clearAllIntervals),History.saveState(History.storeState(History.extractState(History.getLocationHref(),!0))),sessionStorage&&(History.onUnload=function(){var currentStore,item,currentStoreString;try{currentStore=JSON.parse(sessionStorage.getItem("History.store"))||{}}catch(err){currentStore={}}currentStore.idToState=currentStore.idToState||{},currentStore.urlToId=currentStore.urlToId||{},currentStore.stateToId=currentStore.stateToId||{};for(item in History.idToState)History.idToState.hasOwnProperty(item)&&(currentStore.idToState[item]=History.idToState[item]);for(item in History.urlToId)History.urlToId.hasOwnProperty(item)&&(currentStore.urlToId[item]=History.urlToId[item]);for(item in History.stateToId)History.stateToId.hasOwnProperty(item)&&(currentStore.stateToId[item]=History.stateToId[item]);History.store=currentStore,History.normalizeStore(),currentStoreString=JSON.stringify(currentStore);try{sessionStorage.setItem("History.store",currentStoreString)}catch(e){if(e.code!==DOMException.QUOTA_EXCEEDED_ERR)throw e;sessionStorage.length&&(sessionStorage.removeItem("History.store"),sessionStorage.setItem("History.store",currentStoreString))}},History.intervalList.push(setInterval(History.onUnload,History.options.storeInterval)),History.Adapter.bind(window,"beforeunload",History.onUnload),History.Adapter.bind(window,"unload",History.onUnload)),History.emulated.pushState||(History.bugs.safariPoll&&History.intervalList.push(setInterval(History.safariStatePoll,History.options.safariPollInterval)),("Apple Computer, Inc."===navigator.vendor||"Mozilla"===(navigator.appCodeName||""))&&(History.Adapter.bind(window,"hashchange",function(){History.Adapter.trigger(window,"popstate")}),History.getHash()&&History.Adapter.onDomLoad(function(){History.Adapter.trigger(window,"hashchange")})))},History.options&&History.options.delayInit||History.init()}(window),function(){var RequestManager;RequestManager=function(){function RequestManager(options){this.options=null!=options?options:{}}return RequestManager.prototype.call=function($target,state){var self;return self=this,null!=this.redirected?void(this.redirected=null):(self._loading($target,state),$.ajax({url:state.url,headers:{"X-Wiselinks":state.data.render,"X-Wiselinks-Referer":state.data.referer},dataType:"html"}).done(function(data,status,xhr){var assets_digest,url;return url=self._normalize(xhr.getResponseHeader("X-Wiselinks-Url")),assets_digest=xhr.getResponseHeader("X-Wiselinks-Assets-Digest"),self._assets_changed(assets_digest)?window.location.reload(!0):(state=History.getState(),null!=url&&url!==self._normalize(state.url)&&self._redirect_to(url,$target,state,xhr),$target.html(data).promise().done(function(){return self._title(xhr.getResponseHeader("X-Wiselinks-Title")),self._done($target,status,state,data)}))}).fail(function(xhr,status,error){return self._fail($target,status,state,error,xhr.status)}).always(function(data_or_xhr,status,xhr_or_error){return self._always($target,status,state)}))},RequestManager.prototype._normalize=function(url){return null!=url?url=url.replace(/\/+$/,""):void 0},RequestManager.prototype._assets_changed=function(assets_digest){return null!=this.options.assets_digest&&this.options.assets_digest!==assets_digest},RequestManager.prototype._redirect_to=function(url,$target,state,xhr){return xhr&&xhr.readyState<4&&(xhr.onreadystatechange=$.noop,xhr.abort()),this.redirected=!0,$(document).trigger("page:redirected",[$target,state.data.render,url]),History.replaceState(state.data,document.title,url)},RequestManager.prototype._loading=function($target,state){return $(document).trigger("page:loading",[$target,state.data.render,decodeURI(state.url)])},RequestManager.prototype._done=function($target,status,state,data){return $(document).trigger("page:done",[$target,status,decodeURI(state.url),data])},RequestManager.prototype._fail=function($target,status,state,error,code){return $(document).trigger("page:fail",[$target,status,decodeURI(state.url),error,code])},RequestManager.prototype._always=function($target,status,state){return $(document).trigger("page:always",[$target,status,decodeURI(state.url)])},RequestManager.prototype._title=function(value){return null!=value?($(document).trigger("page:title",decodeURI(value)),document.title=decodeURI(value)):void 0},RequestManager}(),void 0===window._Wiselinks&&(window._Wiselinks={}),window._Wiselinks.RequestManager=RequestManager}.call(this),function(){var Page;Page=function(){function Page($target1,options){var self;this.$target=$target1,this.options=options,self=this,this.template_id=(new Date).getTime(),this.request_manager=new _Wiselinks.RequestManager(this.options),this.$target=self._wrap(this.$target),self._try_target(this.$target),History.emulated.pushState&&this.options.html4===!0&&-1===window.location.href.indexOf("#.")&&this.options.html4_normalize_path===!0&&window.location.pathname!==this.options.html4_root_path&&(window.location.href=window.location.protocol+"//"+window.location.host+this.options.html4_root_path+"#."+window.location.pathname),History.Adapter.bind(window,"statechange",function(event,data){var state;return state=History.getState(),self._template_id_changed(state)?self._call(self._reset_state(state)):self._call(state)}),$(document).on("click","a[data-push], a[data-replace]",function(event){var link;return(link=new _Wiselinks.Link(self,$(this))).allows_process(event)?(event.preventDefault(),link.process(),!1):void 0}),$(document).on("submit","form[data-push], form[data-replace]",function(event){var form;return(form=new _Wiselinks.Form(self,$(this)))?(event.preventDefault(),form.process(),!1):void 0})}return Page.prototype.load=function(url,target,render){var $target,selector;return null==render&&(render="template"),"partial"!==render&&(this.template_id=(new Date).getTime()),selector=null!=target?($target=this._wrap(target),this._try_target($target),$target.selector):void 0,History.pushState({timestamp:(new Date).getTime(),template_id:this.template_id,render:render,target:selector,referer:window.location.href},document.title,url)},Page.prototype.reload=function(){return History.replaceState({timestamp:(new Date).getTime(),template_id:this.template_id,render:"template",referer:window.location.href},document.title,History.getState().url)},Page.prototype._call=function(state){var $target;return $target=null!=state.data.target?$(state.data.target):this.$target,this.request_manager.call($target,state)},Page.prototype._template_id_changed=function(state){return null==state.data.template_id||state.data.template_id!==this.template_id},Page.prototype._make_state=function(url,target,render,referer){return null==render&&(render="template"),{url:url,data:{target:target,render:render,referer:referer}}},Page.prototype._reset_state=function(state){return null==state.data&&(state.data={}),state.data.target=null,state.data.render="template",state},Page.prototype._try_target=function($target){if(0===$target.length&&"exception"===this.options.target_missing)throw new Error("[Wiselinks] Target missing: `"+$target.selector+"`")},Page.prototype._wrap=function(object){return $(object)},Page}(),void 0===window._Wiselinks&&(window._Wiselinks={}),window._Wiselinks.Page=Page}.call(this),function(){var Link;Link=function(){function Link(page,$link){this.page=page,this.$link=$link}return Link.prototype.allows_process=function(event){return!(this._cross_origin_link(event.currentTarget)||this._non_standard_click(event))},Link.prototype.process=function(){var type;return type="partial"===this.$link.data("push")?"partial":"template",this.page.load(this.$link.attr("href"),this.$link.data("target"),type)},Link.prototype._cross_origin_link=function(link){return this._different_protocol(link)||this._different_host(link)||this._different_port(link)},Link.prototype._different_protocol=function(link){return":"===link.protocol||""===link.protocol?!1:location.protocol!==link.protocol},Link.prototype._different_host=function(link){return""===link.host?!1:location.host.split(":")[0]!==link.host.split(":")[0]},Link.prototype._different_port=function(link){var port_equals;return port_equals=location.port===link.port||""===location.port&&("80"===link.port||"443"===link.port),!port_equals},Link.prototype._non_standard_click=function(event){return event.metaKey||event.ctrlKey||event.shiftKey||event.altKey},Link}(),void 0===window._Wiselinks&&(window._Wiselinks={}),window._Wiselinks.Link=Link}.call(this),function(){var Form;Form=function(){function Form(page,$form){this.page=page,this.$form=$form}return Form.prototype.process=function(){var self;return self=this,self._include_blank_url_params()?self.page.load(self._url(),self._target(),self._type()):self._without_blank_url_params(function(){return self.page.load(self._url(),self._target(),self._type())})},Form.prototype._without_blank_url_params=function(callback){var $disable,selector;return selector="select:not(:disabled),input:not(:disabled)",$disable=this.$form.find(selector).filter(function(){return!$(this).val()}),$disable.attr("disabled",!0),callback(),$disable.attr("disabled",!1)},Form.prototype._params=function(){var hash,i,item,len,name,ref;for(hash={},ref=this.$form.serializeArray(),i=0,len=ref.length;len>i;i++)item=ref[i],"utf8"!==item.name&&(name=-1!==item.name.indexOf("[]",item.name.length-"[]".length)?item.name.substr(0,item.name.length-2):item.name,null!=hash[name]?hash[name]=hash[name]+(","+item.value):hash[name]=item.value);return hash},Form.prototype._include_blank_url_params=function(){return this.$form.data("include-blank-url-params")===!0},Form.prototype._optimize_url_params=function(){return this.$form.data("optimize-url-params")!==!1},Form.prototype._type=function(){return"partial"===this.$form.data("push")?"partial":"template"},Form.prototype._target=function(){return this.$form.data("target")},Form.prototype._url=function(){var key,params,self,serialized,url,value;return self=this,serialized=function(){var ref;if(self._optimize_url_params()){params=[],ref=this._params();for(key in ref)value=ref[key],params.push(key+"="+encodeURIComponent(value).replace(/%2C/g,","));return params.join("&")}return this.$form.serialize()}.call(this),url=this.$form.attr("action").replace(/\?.*$/,""),serialized.length>0&&(url+="?"+serialized),url},Form}(),null==window._Wiselinks&&(window._Wiselinks={}),window._Wiselinks.Form=Form}.call(this),function(){var Wiselinks;Wiselinks=function(){function Wiselinks($target,options){null==$target&&($target=$("body")),this.options=null!=options?options:{},this._try_jquery(),this.options=$.extend(this._defaults(),this.options),this.enabled()&&(this.options.disable_suid&&(History.options.disableSuid=!0),this.page=new _Wiselinks.Page($target,this.options))}return Wiselinks.prototype.enabled=function(){return!History.emulated.pushState||this.options.html4===!0},Wiselinks.prototype.load=function(url,target,render){return null==render&&(render="template"),this.page.load(url,target,render)},Wiselinks.prototype.reload=function(){return this.page.reload()},Wiselinks.prototype._defaults=function(){return{disable_suid:!0,html4:!0,html4_root_path:"/",html4_normalize_path:!0,target_missing:null,assets_digest:$("meta[name='assets-digest']").attr("content")}},Wiselinks.prototype._try_jquery=function(){if(null==window.jQuery)throw new Error("[Wiselinks] jQuery is not loaded")},Wiselinks}(),window.Wiselinks=Wiselinks}.call(this),/*!
 * pickadate.js v3.3.2, 2013/12/28
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */
function(factory){"function"==typeof define&&define.amd?define("picker",["jquery"],factory):this.Picker=factory(jQuery)}(function($){function PickerConstructor(ELEMENT,NAME,COMPONENT,OPTIONS){function createWrappedComponent(){return PickerConstructor._.node("div",PickerConstructor._.node("div",PickerConstructor._.node("div",PickerConstructor._.node("div",P.component.nodes(STATE.open),CLASSES.box),CLASSES.wrap),CLASSES.frame),CLASSES.holder)}function focusToOpen(event){event.stopPropagation(),"focus"==event.type&&P.$root.addClass(CLASSES.focused),P.open()}if(!ELEMENT)return PickerConstructor;var STATE={id:Math.abs(~~(1e9*Math.random()))},SETTINGS=COMPONENT?$.extend(!0,{},COMPONENT.defaults,OPTIONS):OPTIONS||{},CLASSES=$.extend({},PickerConstructor.klasses(),SETTINGS.klass),$ELEMENT=$(ELEMENT),PickerInstance=function(){return this.start()},P=PickerInstance.prototype={constructor:PickerInstance,$node:$ELEMENT,start:function(){return STATE&&STATE.start?P:(STATE.methods={},STATE.start=!0,STATE.open=!1,STATE.type=ELEMENT.type,ELEMENT.autofocus=ELEMENT==document.activeElement,ELEMENT.type="text",ELEMENT.readOnly=!SETTINGS.editable,P.component=new COMPONENT(P,SETTINGS),P.$root=$(PickerConstructor._.node("div",createWrappedComponent(),CLASSES.picker)).on({focusin:function(event){P.$root.removeClass(CLASSES.focused),event.stopPropagation()},"mousedown click":function(event){var target=event.target;target!=P.$root.children()[0]&&(event.stopPropagation(),"mousedown"!=event.type||$(target).is(":input")||"OPTION"==target.nodeName||(event.preventDefault(),ELEMENT.focus()))}}).on("click","[data-pick], [data-nav], [data-clear]",function(){var $target=$(this),targetData=$target.data(),targetDisabled=$target.hasClass(CLASSES.navDisabled)||$target.hasClass(CLASSES.disabled),activeElement=document.activeElement;activeElement=activeElement&&(activeElement.type||activeElement.href),(targetDisabled||activeElement&&!$.contains(P.$root[0],activeElement))&&ELEMENT.focus(),targetData.nav&&!targetDisabled?P.set("highlight",P.component.item.highlight,{nav:targetData.nav}):PickerConstructor._.isInteger(targetData.pick)&&!targetDisabled?P.set("select",targetData.pick).close(!0):targetData.clear&&P.clear().close(!0)}),SETTINGS.formatSubmit&&(P._hidden=$('<input type=hidden name="'+("string"==typeof SETTINGS.hiddenPrefix?SETTINGS.hiddenPrefix:"")+ELEMENT.name+("string"==typeof SETTINGS.hiddenSuffix?SETTINGS.hiddenSuffix:"_submit")+'"'+($ELEMENT.data("value")||ELEMENT.value?' value="'+PickerConstructor._.trigger(P.component.formats.toString,P.component,[SETTINGS.formatSubmit,P.component.item.select])+'"':"")+">")[0]),$ELEMENT.data(NAME,P).addClass(CLASSES.input).val($ELEMENT.data("value")?PickerConstructor._.trigger(P.component.formats.toString,P.component,[SETTINGS.format,P.component.item.select]):ELEMENT.value).after(P._hidden).on("focus.P"+STATE.id+" click.P"+STATE.id,focusToOpen).on("change.P"+STATE.id,function(){P._hidden&&(P._hidden.value=ELEMENT.value?PickerConstructor._.trigger(P.component.formats.toString,P.component,[SETTINGS.formatSubmit,P.component.item.select]):"")}),SETTINGS.editable||$ELEMENT.on("keydown.P"+STATE.id,function(event){var keycode=event.keyCode,isKeycodeDelete=/^(8|46)$/.test(keycode);return 27==keycode?(P.close(),!1):void((32==keycode||isKeycodeDelete||!STATE.open&&P.component.key[keycode])&&(event.preventDefault(),event.stopPropagation(),isKeycodeDelete?P.clear().close():P.open()))}),SETTINGS.container?$(SETTINGS.container).append(P.$root):$ELEMENT.after(P.$root),P.on({start:P.component.onStart,render:P.component.onRender,stop:P.component.onStop,open:P.component.onOpen,close:P.component.onClose,set:P.component.onSet}).on({start:SETTINGS.onStart,render:SETTINGS.onRender,stop:SETTINGS.onStop,open:SETTINGS.onOpen,close:SETTINGS.onClose,set:SETTINGS.onSet}),ELEMENT.autofocus&&P.open(),P.trigger("start").trigger("render"))},render:function(entireComponent){return entireComponent?P.$root.html(createWrappedComponent()):P.$root.find("."+CLASSES.box).html(P.component.nodes(STATE.open)),P.trigger("render")},stop:function(){return STATE.start?(P.close(),P._hidden&&P._hidden.parentNode.removeChild(P._hidden),P.$root.remove(),$ELEMENT.removeClass(CLASSES.input).removeData(NAME),setTimeout(function(){$ELEMENT.off(".P"+STATE.id)},0),ELEMENT.type=STATE.type,ELEMENT.readOnly=!1,P.trigger("stop"),STATE.methods={},STATE.start=!1,P):P},open:function(dontGiveFocus){return STATE.open?P:($ELEMENT.addClass(CLASSES.active),P.$root.addClass(CLASSES.opened),dontGiveFocus!==!1&&(STATE.open=!0,$ELEMENT.trigger("focus"),$document.on("click.P"+STATE.id+" focusin.P"+STATE.id,function(event){var target=event.target;target!=ELEMENT&&target!=document&&P.close(target===P.$root.children()[0])}).on("keydown.P"+STATE.id,function(event){var keycode=event.keyCode,keycodeToMove=P.component.key[keycode],target=event.target;27==keycode?P.close(!0):target!=ELEMENT||!keycodeToMove&&13!=keycode?$.contains(P.$root[0],target)&&13==keycode&&(event.preventDefault(),target.click()):(event.preventDefault(),keycodeToMove?PickerConstructor._.trigger(P.component.key.go,P,[PickerConstructor._.trigger(keycodeToMove)]):P.$root.find("."+CLASSES.highlighted).hasClass(CLASSES.disabled)||P.set("select",P.component.item.highlight).close())})),P.trigger("open"))},close:function(giveFocus){return giveFocus&&($ELEMENT.off("focus.P"+STATE.id).trigger("focus"),setTimeout(function(){$ELEMENT.on("focus.P"+STATE.id,focusToOpen)},0)),$ELEMENT.removeClass(CLASSES.active),P.$root.removeClass(CLASSES.opened+" "+CLASSES.focused),STATE.open?(STATE.open=!1,$document.off(".P"+STATE.id),P.trigger("close")):P},clear:function(){return P.set("clear")},set:function(thing,value,options){var thingItem,thingValue,thingIsObject=$.isPlainObject(thing),thingObject=thingIsObject?thing:{};if(options=thingIsObject&&$.isPlainObject(value)?value:options||{},thing){thingIsObject||(thingObject[thing]=value);for(thingItem in thingObject)thingValue=thingObject[thingItem],P.component.item[thingItem]&&P.component.set(thingItem,thingValue,options),("select"==thingItem||"clear"==thingItem)&&$ELEMENT.val("clear"==thingItem?"":PickerConstructor._.trigger(P.component.formats.toString,P.component,[SETTINGS.format,P.component.get(thingItem)])).trigger("change");P.render()}return options.muted?P:P.trigger("set",thingObject)},get:function(thing,format){return thing=thing||"value",null!=STATE[thing]?STATE[thing]:"value"==thing?ELEMENT.value:P.component.item[thing]?"string"==typeof format?PickerConstructor._.trigger(P.component.formats.toString,P.component,[format,P.component.get(thing)]):P.component.get(thing):void 0},on:function(thing,method){var thingName,thingMethod,thingIsObject=$.isPlainObject(thing),thingObject=thingIsObject?thing:{};if(thing){thingIsObject||(thingObject[thing]=method);for(thingName in thingObject)thingMethod=thingObject[thingName],STATE.methods[thingName]=STATE.methods[thingName]||[],STATE.methods[thingName].push(thingMethod)}return P},trigger:function(name,data){var methodList=STATE.methods[name];return methodList&&methodList.map(function(method){PickerConstructor._.trigger(method,P,[data])}),P}};return new PickerInstance}var $document=$(document);return PickerConstructor.klasses=function(prefix){return prefix=prefix||"picker",{picker:prefix,opened:prefix+"--opened",focused:prefix+"--focused",input:prefix+"__input",active:prefix+"__input--active",holder:prefix+"__holder",frame:prefix+"__frame",wrap:prefix+"__wrap",box:prefix+"__box"}},PickerConstructor._={group:function(groupObject){for(var loopObjectScope,nodesList="",counter=PickerConstructor._.trigger(groupObject.min,groupObject);counter<=PickerConstructor._.trigger(groupObject.max,groupObject,[counter]);counter+=groupObject.i)loopObjectScope=PickerConstructor._.trigger(groupObject.item,groupObject,[counter]),nodesList+=PickerConstructor._.node(groupObject.node,loopObjectScope[0],loopObjectScope[1],loopObjectScope[2]);return nodesList},node:function(wrapper,item,klass,attribute){return item?(item=$.isArray(item)?item.join(""):item,klass=klass?' class="'+klass+'"':"",attribute=attribute?" "+attribute:"","<"+wrapper+klass+attribute+">"+item+"</"+wrapper+">"):""},lead:function(number){return(10>number?"0":"")+number},trigger:function(callback,scope,args){return"function"==typeof callback?callback.apply(scope,args||[]):callback},digits:function(string){return/\d/.test(string[1])?2:1},isDate:function(value){return{}.toString.call(value).indexOf("Date")>-1&&this.isInteger(value.getDate())},isInteger:function(value){return{}.toString.call(value).indexOf("Number")>-1&&value%1===0}},PickerConstructor.extend=function(name,Component){$.fn[name]=function(options,action){var componentData=this.data(name);return"picker"==options?componentData:componentData&&"string"==typeof options?(PickerConstructor._.trigger(componentData[options],componentData,[action]),this):this.each(function(){var $this=$(this);$this.data(name)||new PickerConstructor(this,name,Component,options)})},$.fn[name].defaults=Component.defaults},PickerConstructor}),/*!
 * Date picker for pickadate.js v3.3.2
 * http://amsul.github.io/pickadate.js/date.htm
 */
function(factory){"function"==typeof define&&define.amd?define(["picker","jquery"],factory):factory(Picker,jQuery)}(function(Picker,$){function DatePicker(picker,settings){var calendar=this,elementValue=picker.$node[0].value,elementDataValue=picker.$node.data("value"),valueString=elementDataValue||elementValue,formatString=elementDataValue?settings.formatSubmit:settings.format,isRTL=function(){return"rtl"===getComputedStyle(picker.$root[0]).direction};calendar.settings=settings,calendar.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"navigate create validate",view:"create validate viewset",disable:"flipItem",enable:"flipItem"},calendar.item={},calendar.item.disable=(settings.disable||[]).slice(0),calendar.item.enable=-function(collectionDisabled){return collectionDisabled[0]===!0?collectionDisabled.shift():-1}(calendar.item.disable),calendar.set("min",settings.min).set("max",settings.max).set("now").set("select",valueString||calendar.item.now,{format:formatString,data:function(formatArray){return valueString&&(formatArray.indexOf("mm")>-1||formatArray.indexOf("m")>-1)}(calendar.formats.toArray(formatString))}),calendar.key={40:7,38:-7,39:function(){return isRTL()?-1:1},37:function(){return isRTL()?1:-1},go:function(timeChange){calendar.set("highlight",[calendar.item.highlight.year,calendar.item.highlight.month,calendar.item.highlight.date+timeChange],{interval:timeChange}),this.render()}},picker.on("render",function(){picker.$root.find("."+settings.klass.selectMonth).on("change",function(){picker.set("highlight",[picker.get("view").year,this.value,picker.get("highlight").date]),picker.$root.find("."+settings.klass.selectMonth).trigger("focus")}),picker.$root.find("."+settings.klass.selectYear).on("change",function(){picker.set("highlight",[this.value,picker.get("view").month,picker.get("highlight").date]),picker.$root.find("."+settings.klass.selectYear).trigger("focus")})}).on("open",function(){picker.$root.find("button, select").attr("disabled",!1)}).on("close",function(){picker.$root.find("button, select").attr("disabled",!0)})}var DAYS_IN_WEEK=7,WEEKS_IN_CALENDAR=6;DatePicker.prototype.set=function(type,value,options){var calendar=this;return calendar.item["enable"==type?"disable":"flip"==type?"enable":type]=calendar.queue[type].split(" ").map(function(method){return value=calendar[method](type,value,options)}).pop(),"select"==type?calendar.set("highlight",calendar.item.select,options):"highlight"==type?calendar.set("view",calendar.item.highlight,options):("flip"==type||"min"==type||"max"==type||"disable"==type||"enable"==type)&&calendar.item.select&&calendar.item.highlight&&calendar.set("select",calendar.item.select,options).set("highlight",calendar.item.highlight,options),calendar},DatePicker.prototype.get=function(type){return this.item[type]},DatePicker.prototype.create=function(type,value,options){var isInfiniteValue,calendar=this;return value=void 0===value?type:value,value==-(1/0)||value==1/0?isInfiniteValue=value:$.isPlainObject(value)&&Picker._.isInteger(value.pick)?value=value.obj:$.isArray(value)?(value=new Date(value[0],value[1],value[2]),value=Picker._.isDate(value)?value:calendar.create().obj):value=Picker._.isInteger(value)||Picker._.isDate(value)?calendar.normalize(new Date(value),options):calendar.now(type,value,options),{year:isInfiniteValue||value.getFullYear(),month:isInfiniteValue||value.getMonth(),date:isInfiniteValue||value.getDate(),day:isInfiniteValue||value.getDay(),obj:isInfiniteValue||value,pick:isInfiniteValue||value.getTime()}},DatePicker.prototype.now=function(type,value,options){return value=new Date,options&&options.rel&&value.setDate(value.getDate()+options.rel),this.normalize(value,options)},DatePicker.prototype.navigate=function(type,value,options){if($.isPlainObject(value)){for(var targetDateObject=new Date(value.year,value.month+(options&&options.nav?options.nav:0),1),year=targetDateObject.getFullYear(),month=targetDateObject.getMonth(),date=value.date;Picker._.isDate(targetDateObject)&&new Date(year,month,date).getMonth()!==month;)date-=1;value=[year,month,date]}return value},DatePicker.prototype.normalize=function(value){return value.setHours(0,0,0,0),value},DatePicker.prototype.measure=function(type,value){var calendar=this;return value?Picker._.isInteger(value)&&(value=calendar.now(type,value,{rel:value})):value="min"==type?-(1/0):1/0,value},DatePicker.prototype.viewset=function(type,dateObject){return this.create([dateObject.year,dateObject.month,1])},DatePicker.prototype.validate=function(type,dateObject,options){var hasEnabledBeforeTarget,hasEnabledAfterTarget,reachedMin,reachedMax,calendar=this,originalDateObject=dateObject,interval=options&&options.interval?options.interval:1,isFlippedBase=-1===calendar.item.enable,minLimitObject=calendar.item.min,maxLimitObject=calendar.item.max,hasEnabledWeekdays=isFlippedBase&&calendar.item.disable.filter(function(value){if($.isArray(value)){var dateTime=calendar.create(value).pick;dateTime<dateObject.pick?hasEnabledBeforeTarget=!0:dateTime>dateObject.pick&&(hasEnabledAfterTarget=!0)}return Picker._.isInteger(value)}).length;if(!options.nav&&(!isFlippedBase&&calendar.disabled(dateObject)||isFlippedBase&&calendar.disabled(dateObject)&&(hasEnabledWeekdays||hasEnabledBeforeTarget||hasEnabledAfterTarget)||dateObject.pick<=minLimitObject.pick||dateObject.pick>=maxLimitObject.pick))for(isFlippedBase&&!hasEnabledWeekdays&&(!hasEnabledAfterTarget&&interval>0||!hasEnabledBeforeTarget&&0>interval)&&(interval*=-1);calendar.disabled(dateObject)&&(Math.abs(interval)>1&&(dateObject.month<originalDateObject.month||dateObject.month>originalDateObject.month)&&(dateObject=originalDateObject,interval=Math.abs(interval)/interval),dateObject.pick<=minLimitObject.pick?(reachedMin=!0,interval=1):dateObject.pick>=maxLimitObject.pick&&(reachedMax=!0,interval=-1),!reachedMin||!reachedMax);)dateObject=calendar.create([dateObject.year,dateObject.month,dateObject.date+interval]);return dateObject},DatePicker.prototype.disabled=function(dateObject){var calendar=this,isDisabledMatch=calendar.item.disable.filter(function(dateToDisable){return Picker._.isInteger(dateToDisable)?dateObject.day===(calendar.settings.firstDay?dateToDisable:dateToDisable-1)%7:$.isArray(dateToDisable)||Picker._.isDate(dateToDisable)?dateObject.pick===calendar.create(dateToDisable).pick:void 0});return isDisabledMatch=isDisabledMatch.length&&!isDisabledMatch.filter(function(dateToDisable){return $.isArray(dateToDisable)&&"inverted"==dateToDisable[3]}).length,-1===calendar.item.enable?!isDisabledMatch:isDisabledMatch||dateObject.pick<calendar.item.min.pick||dateObject.pick>calendar.item.max.pick},DatePicker.prototype.parse=function(type,value,options){var calendar=this,parsingObject={};if(!value||Picker._.isInteger(value)||$.isArray(value)||Picker._.isDate(value)||$.isPlainObject(value)&&Picker._.isInteger(value.pick))return value;if(!options||!options.format)throw"Need a formatting option to parse this..";return calendar.formats.toArray(options.format).map(function(label){var formattingLabel=calendar.formats[label],formatLength=formattingLabel?Picker._.trigger(formattingLabel,calendar,[value,parsingObject]):label.replace(/^!/,"").length;formattingLabel&&(parsingObject[label]=value.substr(0,formatLength)),value=value.substr(formatLength)}),[parsingObject.yyyy||parsingObject.yy,+(parsingObject.mm||parsingObject.m)-(options.data?1:0),parsingObject.dd||parsingObject.d]},DatePicker.prototype.formats=function(){function getWordLengthFromCollection(string,collection,dateObject){var word=string.match(/\w+/)[0];return dateObject.mm||dateObject.m||(dateObject.m=collection.indexOf(word)),word.length}function getFirstWordLength(string){return string.match(/\w+/)[0].length}return{d:function(string,dateObject){return string?Picker._.digits(string):dateObject.date},dd:function(string,dateObject){return string?2:Picker._.lead(dateObject.date)},ddd:function(string,dateObject){return string?getFirstWordLength(string):this.settings.weekdaysShort[dateObject.day]},dddd:function(string,dateObject){return string?getFirstWordLength(string):this.settings.weekdaysFull[dateObject.day]},m:function(string,dateObject){return string?Picker._.digits(string):dateObject.month+1},mm:function(string,dateObject){return string?2:Picker._.lead(dateObject.month+1)},mmm:function(string,dateObject){var collection=this.settings.monthsShort;return string?getWordLengthFromCollection(string,collection,dateObject):collection[dateObject.month]},mmmm:function(string,dateObject){var collection=this.settings.monthsFull;return string?getWordLengthFromCollection(string,collection,dateObject):collection[dateObject.month]},yy:function(string,dateObject){return string?2:(""+dateObject.year).slice(2)},yyyy:function(string,dateObject){return string?4:dateObject.year},toArray:function(formatString){return formatString.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(formatString,itemObject){var calendar=this;return calendar.formats.toArray(formatString).map(function(label){return Picker._.trigger(calendar.formats[label],calendar,[0,itemObject])||label.replace(/^!/,"")}).join("")}}}(),DatePicker.prototype.flipItem=function(type,value){var calendar=this,collection=calendar.item.disable,isFlippedBase=-1===calendar.item.enable;return"flip"==value?calendar.item.enable=isFlippedBase?1:-1:"enable"==type&&value===!0||"disable"==type&&value===!1?(calendar.item.enable=1,collection=[]):"enable"==type&&value===!1||"disable"==type&&value===!0?(calendar.item.enable=-1,collection=[]):$.isArray(value)&&(isFlippedBase&&"enable"==type||!isFlippedBase&&"disable"==type?collection=calendar.addDisabled(collection,value):isFlippedBase||"enable"!=type?isFlippedBase&&"disable"==type&&(collection=calendar.removeDisabled(collection,value)):collection=calendar.addEnabled(collection,value)),collection},DatePicker.prototype.addEnabled=function(collection,item){var calendar=this;return item.map(function(timeUnit){calendar.filterDisabled(collection,timeUnit,1).length&&(collection=calendar.removeDisabled(collection,[timeUnit]),$.isArray(timeUnit)&&collection.filter(function(disabledDate){return Picker._.isInteger(disabledDate)&&calendar.create(timeUnit).day===disabledDate-1}).length&&(timeUnit=timeUnit.slice(0),timeUnit.push("inverted"),collection.push(timeUnit)))}),collection},DatePicker.prototype.addDisabled=function(collection,item){var calendar=this;return item.map(function(timeUnit){calendar.filterDisabled(collection,timeUnit).length?$.isArray(timeUnit)&&calendar.filterDisabled(collection,timeUnit,1).length&&(collection=calendar.removeDisabled(collection,[timeUnit])):collection.push(timeUnit)}),collection},DatePicker.prototype.removeDisabled=function(collection,item){var calendar=this;return item.map(function(timeUnit){collection=calendar.filterDisabled(collection,timeUnit,1)}),collection},DatePicker.prototype.filterDisabled=function(collection,timeUnit,isRemoving){var calendar=this,timeIsObject=$.isArray(timeUnit)||Picker._.isDate(timeUnit),timeObjectValue=timeIsObject&&calendar.create(timeUnit).pick;return collection.filter(function(disabledTimeUnit){var isMatch=timeIsObject&&($.isArray(disabledTimeUnit)||Picker._.isDate(disabledTimeUnit))?timeObjectValue===calendar.create(disabledTimeUnit).pick:timeUnit===disabledTimeUnit;return isRemoving?!isMatch:isMatch})},DatePicker.prototype.nodes=function(isOpen){var calendar=this,settings=calendar.settings,nowObject=calendar.item.now,selectedObject=calendar.item.select,highlightedObject=calendar.item.highlight,viewsetObject=calendar.item.view,disabledCollection=calendar.item.disable,minLimitObject=calendar.item.min,maxLimitObject=calendar.item.max,tableHead=function(collection){return settings.firstDay&&collection.push(collection.shift()),Picker._.node("thead",Picker._.group({min:0,max:DAYS_IN_WEEK-1,i:1,node:"th",item:function(counter){return[collection[counter],settings.klass.weekdays]}}))}((settings.showWeekdaysFull?settings.weekdaysFull:settings.weekdaysShort).slice(0)),createMonthNav=function(next){return Picker._.node("div"," ",settings.klass["nav"+(next?"Next":"Prev")]+(next&&viewsetObject.year>=maxLimitObject.year&&viewsetObject.month>=maxLimitObject.month||!next&&viewsetObject.year<=minLimitObject.year&&viewsetObject.month<=minLimitObject.month?" "+settings.klass.navDisabled:""),"data-nav="+(next||-1))},createMonthLabel=function(monthsCollection){return settings.selectMonths?Picker._.node("select",Picker._.group({min:0,max:11,i:1,node:"option",item:function(loopedMonth){return[monthsCollection[loopedMonth],0,"value="+loopedMonth+(viewsetObject.month==loopedMonth?" selected":"")+(viewsetObject.year==minLimitObject.year&&loopedMonth<minLimitObject.month||viewsetObject.year==maxLimitObject.year&&loopedMonth>maxLimitObject.month?" disabled":"")]}}),settings.klass.selectMonth,isOpen?"":"disabled"):Picker._.node("div",monthsCollection[viewsetObject.month],settings.klass.month)},createYearLabel=function(){var focusedYear=viewsetObject.year,numberYears=settings.selectYears===!0?5:~~(settings.selectYears/2);if(numberYears){var minYear=minLimitObject.year,maxYear=maxLimitObject.year,lowestYear=focusedYear-numberYears,highestYear=focusedYear+numberYears;if(minYear>lowestYear&&(highestYear+=minYear-lowestYear,lowestYear=minYear),highestYear>maxYear){var availableYears=lowestYear-minYear,neededYears=highestYear-maxYear;lowestYear-=availableYears>neededYears?neededYears:availableYears,highestYear=maxYear}return Picker._.node("select",Picker._.group({min:lowestYear,max:highestYear,i:1,node:"option",item:function(loopedYear){return[loopedYear,0,"value="+loopedYear+(focusedYear==loopedYear?" selected":"")]}}),settings.klass.selectYear,isOpen?"":"disabled")}return Picker._.node("div",focusedYear,settings.klass.year)};return Picker._.node("div",createMonthNav()+createMonthNav(1)+createMonthLabel(settings.showMonthsShort?settings.monthsShort:settings.monthsFull)+createYearLabel(),settings.klass.header)+Picker._.node("table",tableHead+Picker._.node("tbody",Picker._.group({min:0,max:WEEKS_IN_CALENDAR-1,i:1,node:"tr",item:function(rowCounter){var shiftDateBy=settings.firstDay&&0===calendar.create([viewsetObject.year,viewsetObject.month,1]).day?-7:0;return[Picker._.group({min:DAYS_IN_WEEK*rowCounter-viewsetObject.day+shiftDateBy+1,max:function(){return this.min+DAYS_IN_WEEK-1},i:1,node:"td",item:function(targetDate){return targetDate=calendar.create([viewsetObject.year,viewsetObject.month,targetDate+(settings.firstDay?1:0)]),[Picker._.node("div",targetDate.date,function(klasses){return klasses.push(viewsetObject.month==targetDate.month?settings.klass.infocus:settings.klass.outfocus),nowObject.pick==targetDate.pick&&klasses.push(settings.klass.now),selectedObject&&selectedObject.pick==targetDate.pick&&klasses.push(settings.klass.selected),highlightedObject&&highlightedObject.pick==targetDate.pick&&klasses.push(settings.klass.highlighted),(disabledCollection&&calendar.disabled(targetDate)||targetDate.pick<minLimitObject.pick||targetDate.pick>maxLimitObject.pick)&&klasses.push(settings.klass.disabled),klasses.join(" ")}([settings.klass.day]),"data-pick="+targetDate.pick)]}})]}})),settings.klass.table)+Picker._.node("div",Picker._.node("button",settings.today,settings.klass.buttonToday,"type=button data-pick="+nowObject.pick+(isOpen?"":" disabled"))+Picker._.node("button",settings.clear,settings.klass.buttonClear,"type=button data-clear=1"+(isOpen?"":" disabled")),settings.klass.footer)},DatePicker.defaults=function(prefix){return{monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",format:"d mmmm, yyyy",klass:{table:prefix+"table",header:prefix+"header",navPrev:prefix+"nav--prev",navNext:prefix+"nav--next",navDisabled:prefix+"nav--disabled",month:prefix+"month",year:prefix+"year",selectMonth:prefix+"select--month",selectYear:prefix+"select--year",weekdays:prefix+"weekday",day:prefix+"day",disabled:prefix+"day--disabled",selected:prefix+"day--selected",highlighted:prefix+"day--highlighted",now:prefix+"day--today",infocus:prefix+"day--infocus",outfocus:prefix+"day--outfocus",footer:prefix+"footer",buttonClear:prefix+"button--clear",buttonToday:prefix+"button--today"}}}(Picker.klasses().picker+"__"),Picker.extend("pickadate",DatePicker)}),function(){var call_page_callbacks,hide_loading_curtain,initialize_wiselinks,show_loading_curtain;Boundless.Utils||(Boundless.Utils={}),$(function(){var ie_version,ua;return ua=navigator.userAgent.toLowerCase(),-1!==ua.indexOf("trident")&&(ie_version=parseInt(ua.split("trident")[1])),window.wiselinks=void 0,null==ie_version&&"function"==typeof initialize_wiselinks&&initialize_wiselinks(),call_page_callbacks(),Boundless.Utils.InitializeDesmos()}),show_loading_curtain=function(){var $curtain,h;if(!$("#wiselinks-loading-curtain").length)return $curtain=$("<div id='wiselinks-loading-curtain'>").css({opacity:0}).insertAfter($("#wiselinks-container")),$curtain.animate({opacity:.5},{duration:250}),h=$("#wiselinks-loading-curtain").innerHeight(),window.wiselinks_spinner=new Spinner({lines:15,length:10,width:3,radius:10,color:"#aaa",trail:60,opacity:.25,top:h/2+"px"}).spin($("#wiselinks-loading-curtain")[0])},hide_loading_curtain=function(){var ref;return $("#wiselinks-loading-curtain").remove(),(null!=(ref=window.wiselinks_spinner)?ref.el:void 0)?$(window.wiselinks_spinner.el).remove():void 0},initialize_wiselinks=function(){var loading_curtain_timeout;return window.wiselinks=new Wiselinks($("#wiselinks-container")),loading_curtain_timeout=0,$(document).off("page:done").on("page:done",function(event,$target,status,url,data){return clearTimeout(loading_curtain_timeout),$("body").scrollTo(0),Boundless.Analytics.track_pageview(),"undefined"!=typeof ViewHelpers&&null!==ViewHelpers?ViewHelpers.typeset_equations(".ignore_math"):void 0}),$(document).off("page:loading").on("page:loading",function(){return Boundless.PageCallbacks=[],$("body").addClass("loading"),loading_curtain_timeout=setTimeout(show_loading_curtain,500)}),$(document).off("page:always").on("page:always",function(){return hide_loading_curtain(),clearTimeout(loading_curtain_timeout),$("body").removeClass("loading"),call_page_callbacks(),Boundless.Utils.InitializeDesmos()})},call_page_callbacks=function(){return _.each(Boundless.PageCallbacks,function(callback){return callback()})},Boundless.Utils.InitializeDesmos=function(){var activate_graphs,scriptNode;return activate_graphs=function(){return _.each(document.querySelectorAll("[data-graph-state]"),function(graph){return setTimeout(function(){return Desmos.Calculator(graph,{menus:!1,expressionsCollapsed:!0}).setState(graph.dataset.graphState)},200)})},void 0===window.Desmos?(scriptNode=document.createElement("script"),scriptNode.onload=function(){return activate_graphs()},scriptNode.src="https://www.desmos.com/api/v0.3/calculator.js?apiKey=68ffbe651df5bb2531b8ff3e6bd76995",document.body.appendChild(scriptNode)):activate_graphs()}}.call(this);